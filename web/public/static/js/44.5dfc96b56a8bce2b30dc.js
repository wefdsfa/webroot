webpackJsonp([44],{A0nd:function(t,e,a){"use strict";(function(t){var i=a("C331"),s=a("y0ro"),n=a("JUJb");e.a={mixins:[s.a,n.a],data:function(){return{testObj:{a:1,b:2},showSign:!1,showImgDetailStatus:!1,deleteImgWidth:1,imgDetailSrc:"",enrollUrl:"/table-data/archives/getEnrollment",enrollColumns:[],showDetailStatus:!1,imgList:[],timestamp:"?timestamp=",enrollUserNo:"",enrollAddColumns:[],enrollAddList:[],lang:"zh-cn",checkRows:[],isEdit:!0,addParams:{id:"",year:"",studentNo:"",studentImage:"",province:"",name:"",sex:"",idCardNo:"",batch:"",division:"",castArchivesScore:"",enrollmentModels:"",majorName:"",adviceNoteNo:"",emsNo:"",publish:"",registerTime:"",registerLocation:"",educationLevel:"",examinationRanking:"",updateExaminationRanking:"",examinationRankingData:"",examinationRankingDataList:""},addOptions:[{name:"年份",type:"input",value:"year",require:!0,noEdit:!0},{name:"考生号",type:"input",value:"studentNo",require:!0,noEdit:!0},{name:"省份",type:"input",value:"province",require:!0,noEdit:!0},{name:"名字",type:"input",value:"studentNo",require:!0,noEdit:!0},{name:"性别",type:"input",value:"sex",require:!0,noEdit:!0},{name:"身份证",type:"input",value:"idCardNo",require:!0,noEdit:!0},{name:"批次",type:"input",value:"batch",require:!0,noEdit:!0},{name:"投档成绩",type:"input",value:"castArchivesScore",require:!0,noEdit:!0},{name:"录取方式",type:"input",value:"enrollmentModels",require:!0,noEdit:!0},{name:"专业名称",type:"input",value:"majorName",require:!0,noEdit:!0},{name:"通知书号",type:"input",value:"adviceNoteNo",require:!0,noEdit:!0},{name:"EMS单号",type:"input",value:"emsNo",require:!0,noEdit:!1},{name:"报道时间",type:"date",value:"registerTime",require:!0,noEdit:!1},{name:"报道地点",type:"input",value:"registerLocation",require:!0,noEdit:!1},{name:"培养层次",type:"input",value:"educationLevel",require:!0,noEdit:!0},{name:"高考排名",type:"input",value:"examinationRanking",require:!0,noEdit:!0}]}},props:{selectItem:{default:{}},orgM:{default:!1}},created:function(){var t=this,e=localStorage.getItem("lang"),a={NF:"年份",SYSSDM:"生源省市代码",SYSSMC:"生源省市名称",YXDM:"院校代码",YXMC:"院校名称",YXDH:"院校代号",YXDHMC:"院校代号名称",CCDM:"层次代码",CCMC:"层次名称",ZSZYDM:"招生专业代码",ZSZYMC:"招生专业名称",SBZYDH:"",XBZYDH:"校编专业代号",ZKFX:"招考方向",BHZY:"编号专业",BHZYGS:"编号专业格式",ZYLBDM:"专业类别代码",ZYLBMC:"专业类别名称",XZDM:"\t学制代码",XZMC:"学制名称",SFBZ:"学费标准",BXDD:"",BXDDSSMC:"",BXDDDJSMC:"",BXDDQXMC:"",BXDDXXDZ:"",BXDDBB:"",SFKS:"\t是否考试",WYYZ:"院系编码代码",YXBMDM:"院校编码代码",YXBMMC:"院校编码名称",ZYBZ:"专业备注",KLDM:"科类代码",KLMC:"科类名称",JHXZDM:"计划性质代码",JHXZMC:"计划性质名称",JHLBDM:"计划类别代码",JHLBMC:"计划类别名称",PCDM:"批次代码",PCMC:"批次名称",ZKLXDM:"招考类型代码",ZKLXMC:"招考类型名称",KSKMYQ:"考试科目要求",KSKMYQZW:"考试科目要求专业",XKKMBHZY:"选考科目编号专业",SKYQ:"术科要求",DZ1:"",DZ2:"",DZ3:"",DZ4:"",DZ5:"",DZ6:"",DZ7:"",DZ8:"",DZ9:"",DZ10:"",ZSJHS:"招生计划数",XFZY:"细分专业招生计划数"};for(var s in a)this.enrollColumns.push({id:s.toLowerCase(),title:a[s]?a[s]:s,hoverTitle:s,width:110,className:"text-left",hidden:!1});this.enrollColumns[0].search={type:"input",data:{placeholder:""}},this.enrollColumns[2].search={type:"input",data:{placeholder:""}},this.enrollColumns[8].search={type:"input",data:{placeholder:""}},this.enrollColumns[10].search={type:"input",data:{placeholder:""}},this.enrollColumns.unshift({id:"status",title:"状态",width:110,className:"text-left",hidden:!1}),Object(i.g)(e)&&(this.lang=e),this.importParams={parentPageTitle:"",downloadTemplateUrl:"/archives/enrollment/module",downloadErrorTemplateUrl:"/archives/enrollment/error",checkTemplateUrl:"/archives/enrollment/check",templateName:"批量导入模板",importBtnType:[{url:"/archives/enrollment/inputExcel",method:"post",isShowBtn:!0,name:"增量导入",success:function(e){t.timestamp="?timestamp="+(new Date).getTime(),t.curRoute="allStaff"}}]}},methods:{showImgDetail:function(t){this.showImgDetailStatus=!0,this.imgDetailSrc=t,window.onmousewheel=document.onmousewheel=this.scrollImg},scrollImg:function(t){this.showImgDetailStatus&&(t.deltaY>0?this.deleteImgWidth<2&&(this.deleteImgWidth+=.1):this.deleteImgWidth>.2&&(this.deleteImgWidth-=.1))},save:function(){var t=this,e={id:this.addParams.id,emsNo:this.addParams.emsNo,registerTime:this.addParams.registerTime,registerLocation:this.addParams.registerLocation};Object(i.d)("api/archives/enroll/updateEms",e,"put").then(function(e){e.state&&(t.$toast("编辑成功!"),t.timestamp="?timestamp="+(new Date).getTime(),t.showDetailStatus=!1)})},batchChange:function(t){var e=this;if(this.checkRows.length){var a="id=",s=this.checkRows.map(function(t){return a+=t.id+",",t.id});a=a.substr(0,a.length-1);var n="";"delete"===t?confirm("确定删除该批次吗？删除后数据将无法恢复")&&(n="/api/archives/enrollment/delete?"+a,Object(i.d)(n,{a:1},"post").then(function(t){t.state&&(e.$toast("操作成功!"),e.timestamp="?timestamp="+(new Date).getTime())})):(n="/api/archives/enrollment/status?"+a,Object(i.d)(n,s,"post").then(function(t){t.state&&(e.$toast("操作成功!"),e.timestamp="?timestamp="+(new Date).getTime())}))}else this.$toast("请选择招生计划!")},afterChecked:function(t){this.checkRows=t},showDetail:function(t){this.addParams=t,this.showDetailStatus=!0;this.imgList=t.examinationRankingDataList.map(function(t){return"downloads/archives/query/getImageDate?fileName="+t})},getSelectOptions:function(t){return"province"===t?this.provinceList:[{id:1,text:"hh"},{id:2,text:"haha"}]},deleteImg:function(t){this.imgList.splice(t,1)},onSelectImage:function(t){var e=event.target.files[0],a=this;if(e){event.target.value="";var i=new FileReader;i.onloadend=function(t){var e=new Image;e.src=t.target.result,e.onload=function(){a.imgList.push(e.src)}},i.readAsDataURL(e)}},selectImage:function(){t("#imageInput").click()}},computed:{translate:function(){return Object(i.g)(this.lang).enrollManage}}}}).call(e,a("qqHy"))},D4Pg:function(t,e){},V2pp:function(t,e,a){"use strict";(function(t){a("C331");var e=a("y0ro"),i=a("JUJb");e.a,i.a}).call(e,a("qqHy"))},hUVL:function(t,e){},vfWM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("V2pp");var i=a("A0nd"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showDetailStatus?a("div",{staticClass:"detail_wrap"},[a("label",{staticClass:"back pull-left",staticStyle:{padding:"0"},on:{click:function(e){t.showDetailStatus=!1}}},[a("i",{staticClass:"maticon pull-left",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),a("span",[t._v("返回")])]),t._v(" "),a("div",{staticClass:"form-wrap box_flex align_center"},t._l(t.addOptions,function(e,i){return a("div",{key:i,staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label",class:{require:e.require}},[a("span",[t._v(t._s(e.name)+":")])]),t._v(" "),"input"==e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addParams[e.value],expression:"addParams[item.value]"}],staticClass:"form-control search-input organization-input",attrs:{type:"text",disabled:t.isEdit&&e.noEdit},domProps:{value:t.addParams[e.value]},on:{input:function(a){a.target.composing||t.$set(t.addParams,e.value,a.target.value)}}}):t._e(),t._v(" "),"address"==e.type?a("v-select",{attrs:{options:t.getAddressOptions("province"),search:!0,"options-value":"name","options-label":"name","data-index":i},model:{value:t.addParams.province,callback:function(e){t.$set(t.addParams,"province",e)},expression:"addParams['province']"}}):t._e(),t._v(" "),t.addParams.province&&"address"==e.type?a("v-select",{attrs:{options:t.getAddressOptions("city",t.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:t.addParams.city,callback:function(e){t.$set(t.addParams,"city",e)},expression:"addParams['city']"}}):t._e(),t._v(" "),t.addParams.city&&"address"==e.type?a("v-select",{attrs:{options:t.getAddressOptions("area",t.addParams.city,t.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:t.addParams.area,callback:function(e){t.$set(t.addParams,"area",e)},expression:"addParams['area']"}}):t._e(),t._v(" "),"detect"==e.type?a("detect",{attrs:{url:e.url,searchVal:t.addParams[e.label],placeholder:e.placeholder},on:{afterSelected:function(a){t.afterDetect(a,e)}}}):t._e(),t._v(" "),"select"==e.type?a("v-select",{attrs:{options:t.getSelectOptions(e.value),"options-value":"id","options-label":"text","close-on-select":"",justify:""},model:{value:t.addParams[e.value],callback:function(a){t.$set(t.addParams,e.value,a)},expression:"addParams[item.value]"}}):t._e(),t._v(" "),"date"==e.type?a("v-datepicker",{model:{value:t.addParams[e.value],callback:function(a){t.$set(t.addParams,e.value,a)},expression:"addParams[item.value]"}}):t._e()],1)}),0),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"form-wrap box_flex align_center"},t._l(t.imgList,function(e,i){return a("div",{key:i,staticClass:"img-div"},[a("img",{staticClass:"img",attrs:{src:e},on:{click:function(a){return t.showImgDetail(e)}}})])}),0),t._v(" "),a("div",{staticClass:"box_flex flex_center",staticStyle:{padding:"30px 0"}},[a("button",{staticClass:"btn submit-btn",on:{click:t.save}},[t._v("保存")])]),t._v(" "),a("v-modal",{staticClass:"img_modal",attrs:{show:t.showImgDetailStatus,backdrop:"true"},on:{onHide:function(e){t.showImgDetailStatus=!1}}},[a("div",{staticClass:"modal-body box_flex flex_center",style:{transform:"scale("+t.deleteImgWidth+")"},attrs:{slot:"modal-body",tyle:"width:400px;"},on:{click:function(e){t.showImgDetailStatus=!1}},slot:"modal-body"},[a("img",{staticStyle:{width:"100%"},attrs:{id:"detailImg",src:t.imgDetailSrc,alt:""}})])])],1):a("div",{staticClass:"enroll"},[a("v-table",{ref:"enrollTable",attrs:{title:"招生计划列表",url:t.enrollUrl+t.timestamp,pagesize:"10",idField:"id",columns:t.enrollColumns,columnsControl:!0,multiple:"true",order:!0,search:!1},on:{afterChecked:t.afterChecked}},[a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t.quickAddRecord}},[t._v(t._s(t.translate.batch)+t._s(t.translate.add))]),t._v(" "),a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.batchChange("delete")}}},[t._v(t._s(t.translate.batch)+"删除")]),t._v(" "),a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.batchChange("release")}}},[t._v(t._s(t.translate.batch)+"发布")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"importPage"===t.curRoute,expression:"curRoute === 'importPage'"}],staticClass:"importPageClass"},[a("v-import",t._b({on:{backParentPage:function(e){t.curRoute="allStaff"}}},"v-import",t.importParams,!1))],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-wrap box_flex align_center"},[e("div",{staticClass:"form-group box_flex align_center"},[e("div",{staticClass:"label require"},[this._v("高考排名材料:")])])])}]};var n=function(t){a("hUVL"),a("D4Pg")},r=a("C7Lr")(i.a,s,!1,n,"data-v-5d40a600",null);e.default=r.exports}});