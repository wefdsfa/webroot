webpackJsonp([8],{"3yW3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("aozt");var a=i("C331"),s=i("VDzf"),o=i("162o"),n=i("p+qa"),r=(s.a,{components:{position:s.a},data:function(){return{showDialog:"",disabledEditPosition:!1,defaultFormInfo:null,isEditPosition:!0,curPositionIndex:"",tableCheckedList:[],tableCheckedListAll:"",isPassOpinionBtn:!1,passOpinionLoading:!1,loginType:{},batchPassLoading:{pass:!1,noPass:!1},Rules:{contactPeople:[{required:!0,message:"请输入单位联系人",trigger:"blur"}],contactPhone:[{required:!0,validator:function(t,e,i){if(!e)return i(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(e))return i(new Error("请输入正确的手机号"));i()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确格式的邮箱",trigger:"blur"}],summary:[{required:!0,message:"请输入单位简介",trigger:"blur"}]},inviteRuleForm:{audit:"",loading:!1,dialog:!1},editStatus:!1,inviteRules:{audit:[{required:!0,message:"请输入不通过审核意见",trigger:"blur"}]},tableData_url:"/table-data/employment/audit/getRecruitmentAuditBySearch",newAddPosition:!1,newAddRecruit:!1,curRecruition:{},curPositionInfo:{},curEditPositionId:"",positionIdArr:[],positionInfoList:[],recruitmentBrief:"",recruitmentInfoData:{contactPeople:"",email:"",summary:"",contactPhone:""},positionInfoForm:{positionName:"",positionType:"",positionProperty:"",major:"",diploma:"",salary:"",recruitNumber:"",workplace:"",positionRemarks:"",positionRequire:"",address:""},tabsItem:["单位信息","职位信息","招聘简章"],currentTab:0,showAddRecruidInfo:!1,showAddPositionModal:!1,showRecruidInfoList:!0}},created:function(){var t=this;this.catchLoginType(),this.columns=[{id:"title",title:"招聘信息标题",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"companyName",title:"单位",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"createTime",title:"提交时间",className:"text-left",width:130,hidden:!1},{id:"status",title:"状态",width:150,className:"text-left",hidden:!1},{id:"opts",title:"操作",width:80,hidden:!1,formatter:function(e){return[{tag:"a",text:"待审核"==e.status?"审核":"查看",callback:function(e,i){t.ecruitmenInfoLook(e)}}]}}]},methods:{catchLoginType:function(){var t=this;Object(n.e)().then(function(e){e.state&&(t.loginType=e.data)})},closeDialog:function(){this.showDialog=!1},checkPosition:function(t,e){this.showDialog=!0,this.isEditPosition=!1,this.defaultFormInfo=t,this.curPositionIndex=e},Delete:function(t,e){var i=this;t.id?Object(n.b)(t.id).then(function(t){t.state?i.$message.success("删除成功"):(i.$message.error(t.message),i.positionInfoList.splice(e,1))}):this.positionInfoList.splice(e,1)},addPosition:function(){this.showDialog=!0,this.defaultFormInfo=null,this.isEditPosition=!0},positionSubmit:function(t){var e=this;Object(o.setTimeout)(function(){(!e.isEditPosition||e.defaultFormInfo&&e.defaultFormInfo.id)&&e.positionInfoList.splice(e.curPositionIndex,1),e.positionInfoList.push(t)},500)},onBatchPass:function(t){var e=this;if(0!=this.tableCheckedList.length){var i=[];this.tableCheckedList.map(function(t){i.push(t.id)}),"yes"==t?(this.batchPassLoading.pass=!0,Object(a.e)({url:"/api/employment/audit/agreeRecruitmentAuditList",type:"put",data:{relationIds:i},success:function(t){t.state?(e.$message.success("批量同意招聘成功"),e.tableData_url="/table-data/employment/audit/getRecruitmentAuditBySearch?timestamp="+Object(a.a)()):e.$message.error(t.message)}}).always(function(){e.batchPassLoading.pass=!1,e.tableCheckedList=[]})):(this.batchPassLoading.noPass=!0,Object(a.e)({url:"/api/employment/audit/repulseRecruitmentAuditLIst",type:"put",data:{relationIds:i},success:function(t){t.state?(e.$message.success("批量拒绝招聘成功"),e.tableData_url="/table-data/employment/audit/getRecruitmentAuditBySearch?timestamp="+Object(a.a)()):e.$message.error(t.message)}}).always(function(){e.batchPassLoading.noPass=!1,e.tableCheckedList=[]}))}else this.$message.error("请选择需要操作的待审核字段字段")},_tableChecked:function(t){var e=[];t.forEach(function(t){"待审核"==t.status&&e.push(t)}),this.tableCheckedListAll=t.length,this.tableCheckedList=e},dateChange:function(t){},onPassInvite:function(){var t=this;this.$refs.recruitmentInfoData.validate(function(e){e?Object(a.e)({url:"/api/employment/audit/agreeRecruitmentAudit?id="+t.recruitmentInfoData.id,type:"PUT",success:function(e){e.state?(t.$message.success("通过公司招聘成功"),t.showRecruidInfoList=!0,t.showAddRecruidInfo=!1,t.tableData_url="/table-data/employment/audit/getRecruitmentAuditBySearch?timeStamp="+(new Date).getTime()):(t.$message.error(e.message),t.showRecruidInfoList=!0,t.showAddRecruidInfo=!1,t.tableData_url="/table-data/employment/audit/getRecruitmentAuditBySearch?timeStamp="+(new Date).getTime())}}):t.$message.error("请先填写完整信息")})},onNoPassInviteCancel:function(t){this.$refs[t].resetFields(),this.inviteRuleForm.dialog=!1},onNoPassInvite:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.inviteRuleForm.loading=!0,Object(a.e)({url:"/api/employment/audit/repulseRecruitmentAudit?relationId="+e.recruitmentInfoData.id,type:"PUT",success:function(t){t.state&&(e.$message.success("拒绝公司招聘成功"),e.showRecruidInfoList=!0,e.showAddRecruidInfo=!1,e.inviteRuleForm.dialog=!1,e.tableData_url="/table-data/employment/audit/getRecruitmentAuditBySearch?timeStamp="+(new Date).getTime())}}).always(function(){e.inviteRuleForm.loading=!1}))})},onPositionIndoEdit:function(t,e){this.showDialog=!0,this.isEditPosition=!1,this.defaultFormInfo=t,this.curPositionIndex=e},getDict:function(t,e){var i=this,s="/api/employment/system/findDictByTypeName?typeName="+t;Object(a.e)({url:s,type:"get",success:function(t){t.state?i[e]=t.data:i[e]=[]}})},ecruitmenInfoLook:function(t){var e=this,i="/api/employment/recruitment/getRecruitment?recruitmentId="+t.id;this.newAddRecruit=!1,this.currentTab=0,Object(a.e)({url:i,type:"get",success:function(i){if(i.state&&i.data){var a=i.data;e.showRecruidInfoList=!1,e.showAddRecruidInfo=!0,e.recruitmentInfoData={status:t.status,id:a.id,title:a.title,companyName:a.companyName,addressDetail:a.addressDetail,property:a.property,scale:a.scale,contactPeople:a.contactPeople,contactPhone:a.contactPhone,email:a.email,summary:a.summary,recruitmentBrief:a.recruitmentBrief},"待审核"==e.recruitmentInfoData.status?e.editStatus=!0:e.editStatus=!1,a.startTime?e.recruitmentInfoData.time=a.startTime+"到"+a.endTime:e.recruitmentInfoData.time="",e.positionInfoList=i.data.recruitmentPositionList}}})},tabsItemClick:function(t){this.currentTab=t}}}),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"recruitmentInfo",attrs:{id:"recruitmentInfo"}},[t.showAddRecruidInfo?i("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){t.showAddRecruidInfo=!1,t.showRecruidInfoList=!0}}},[t._v("返回")]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRecruidInfoList,expression:"showRecruidInfoList"}]},[i("div",{staticClass:"title"},[t._v("单位招聘信息")]),t._v(" "),i("v-table",{ref:"unitsManagerTable",attrs:{url:t.tableData_url,columns:t.columns,pagesize:"15",idField:"id",multiple:!0,order:!0,search:!1},on:{afterChecked:t._tableChecked}},[i("div",{staticClass:"pull-left",attrs:{slot:"btn-group"},slot:"btn-group"},[t.tableCheckedListAll?i("el-button",{staticClass:"operability-hint",attrs:{type:"text"}},[t._v("已选择"+t._s(t.tableCheckedListAll)+"项,其中可操作的有"+t._s(t.tableCheckedList.length)+"项")]):t._e(),t._v(" "),t.tableCheckedList.length?i("el-button",{attrs:{loading:t.batchPassLoading.pass,type:"text"},on:{click:function(e){return t.onBatchPass("yes")}}},[t._v("通过")]):t._e(),t._v(" "),t.tableCheckedList.length?i("el-button",{attrs:{loading:t.batchPassLoading.noPass,type:"text"},on:{click:function(e){return t.onBatchPass("no")}}},[t._v("不通过")]):t._e()],1)])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddRecruidInfo,expression:"showAddRecruidInfo"}]},[i("div",{staticClass:"title addRecruid-title"},[t._m(0),t._v(" "),i("span",[t._v(t._s(t.recruitmentInfoData.title))])]),t._v(" "),i("div",{staticClass:"tabs"},[i("ul",{staticClass:"tabs-title clearfix"},t._l(t.tabsItem,function(e,a){return i("li",{key:a,class:{active:t.currentTab==a},on:{click:function(e){return t.tabsItemClick(a)}}},[t._v(t._s(e))])}),0),t._v(" "),i("ul",{staticClass:"tabs-content"},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:0==t.currentTab,expression:"currentTab==0"}],ref:"recruitmentInfoData",staticClass:"tabs-content-form",attrs:{model:t.recruitmentInfoData,rules:t.Rules,"label-width":"150px"}},[i("div",{staticClass:"w50"},[i("el-form-item",{attrs:{label:"单位名称："}},[i("span",[t._v(t._s(t.recruitmentInfoData.companyName))])]),t._v(" "),i("el-form-item",{attrs:{label:"单位性质："}},[i("span",[t._v(t._s(t.recruitmentInfoData.property))])])],1),t._v(" "),i("div",{staticClass:"w50"},[i("el-form-item",{attrs:{label:"单位地址："}},[i("span",[t._v(t._s(t.recruitmentInfoData.addressDetail))])]),t._v(" "),i("el-form-item",{attrs:{label:"单位规模："}},[i("span",[t._v(t._s(t.recruitmentInfoData.scale))])])],1),t._v(" "),i("el-form-item",{staticClass:"w100",attrs:{label:"单位联系人：",prop:"contactPeople"}},[t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.contactPeople))]),t._v(" "),t.editStatus?i("el-input",{staticClass:"input-custom",attrs:{placeholder:"单位联系人"},model:{value:t.recruitmentInfoData.contactPeople,callback:function(e){t.$set(t.recruitmentInfoData,"contactPeople",e)},expression:"recruitmentInfoData.contactPeople"}}):t._e()],1),t._v(" "),i("el-form-item",{staticClass:"w100",attrs:{label:"联系人电话：",prop:"contactPhone"}},[t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.contactPhone))]),t._v(" "),t.editStatus?i("el-input",{staticClass:"input-custom",attrs:{placeholder:"请输入电话"},model:{value:t.recruitmentInfoData.contactPhone,callback:function(e){t.$set(t.recruitmentInfoData,"contactPhone",e)},expression:"recruitmentInfoData.contactPhone"}}):t._e()],1),t._v(" "),i("el-form-item",{staticClass:"w100",attrs:{prop:"email",label:"简历接收邮箱："}},[t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.email))]),t._v(" "),t.editStatus?i("el-input",{staticClass:"input-custom",attrs:{placeholder:"请输入邮箱"},model:{value:t.recruitmentInfoData.email,callback:function(e){t.$set(t.recruitmentInfoData,"email",e)},expression:"recruitmentInfoData.email"}}):t._e()],1),t._v(" "),i("el-form-item",{staticClass:"w100"},[i("div",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"#E85656","margin-left":"5px"}},[t._v("*")]),t._v("简历接收时间：")]),t._v(" "),t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.time))]),t._v(" "),t.editStatus?i("v-datepicker-area",{ref:"datepicker",staticClass:"btn-block time-picker time-item",staticStyle:{"margin-left":"-2px"},attrs:{format:"yyyy-MM-dd",defaultValue:t.recruitmentInfoData.time},on:{startSelected:t.selectStartTime,endSelected:t.selectEndTime}}):t._e()],1),t._v(" "),i("el-form-item",{attrs:{prop:"summary",label:"单位简介："}},[t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.summary))]),t._v(" "),t.editStatus?i("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:"5",placeholder:"请输入内容",resize:"none"},model:{value:t.recruitmentInfoData.summary,callback:function(e){t.$set(t.recruitmentInfoData,"summary",e)},expression:"recruitmentInfoData.summary"}}):t._e()],1)],1),t._v(" "),1==t.currentTab?i("li",[i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.positionInfoList}},[i("el-table-column",{attrs:{type:"index"}}),t._v(" "),i("el-table-column",{attrs:{prop:"positionName",label:"职位名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"positionType",label:"职位类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.positionTypeName?e.row.positionTypeName:e.row.positionType))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"positionProperty",label:"职位性质"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s("PRACTICE"==e.row.positionProperty?"实习":"全职"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.editStatus?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.onPositionIndoEdit(e.row,e.$index)}}},[t._v("编辑")]):t._e(),t._v(" "),t.editStatus?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.Delete(e.row,e.$index)}}},[t._v("删除")]):t._e(),t._v(" "),t.editStatus?t._e():i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.checkPosition(e.row,e.$index)}}},[t._v("查看")])]}}])})],1),t._v(" "),i("div",{staticClass:"add-position-warp"},[t.editStatus?i("el-button",{staticClass:"add-position",attrs:{icon:"el-icon-plus",plain:""},on:{click:t.addPosition}},[t._v("添加")]):t._e()],1)],1):t._e(),t._v(" "),2==t.currentTab?i("li",[i("div",{staticClass:"recruitment-brochure"},[t.editStatus?t._e():i("span",[t._v(t._s(t.recruitmentInfoData.recruitmentBrief))]),t._v(" "),t.editStatus?i("el-input",{model:{value:t.recruitmentBrief,callback:function(e){t.recruitmentBrief=e},expression:"recruitmentBrief"}}):t._e()],1),t._v(" "),"待审核"==t.recruitmentInfoData.status?i("div",{staticClass:"btn-group-o"},[i("el-button",{staticClass:"back-btn btn-o",attrs:{type:"primary"},on:{click:t.onPassInvite}},[t._v("通过")]),t._v(" "),i("el-button",{staticClass:"back-btn btn-o",attrs:{plain:""},on:{click:function(e){t.inviteRuleForm.dialog=!0}}},[t._v("不通过")])],1):t._e()]):t._e()],1)])]),t._v(" "),i("el-dialog",{attrs:{close:"changeEmail-dialog",title:"查看职位",visible:t.showAddPositionModal,width:"60%"},on:{"update:visible":function(e){t.showAddPositionModal=e}}},[i("el-form",{ref:"positionInfoForm",staticClass:"add-position-form",attrs:{model:t.positionInfoForm,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"职位名称",prop:"positionName"}},[i("span",[t._v(t._s(t.positionInfoForm.positionName))])]),t._v(" "),i("el-form-item",{attrs:{label:"职位类别",prop:"positionType"}},[i("span",[t._v(t._s(t.positionInfoForm.positionTypeName))])]),t._v(" "),i("el-form-item",{attrs:{label:"职位性质",prop:"positionProperty"}},[i("span",[t._v(t._s("FULL_TIME"==t.positionInfoForm.positionProperty?"全职":"实习"))])]),t._v(" "),i("el-form-item",{attrs:{label:"专业要求",prop:"major"}},[i("span",[t._v(t._s(t.positionInfoForm.majorName))])]),t._v(" "),i("el-form-item",{attrs:{label:"学历要求",prop:"diploma"}},[i("span",[t._v(t._s(t.positionInfoForm.diplomaName))])]),t._v(" "),i("el-form-item",{attrs:{label:"薪资范围",prop:"salary"}},[i("span",[t._v(t._s(t.positionInfoForm.salaryName))])]),t._v(" "),i("el-form-item",{attrs:{label:"招聘人数",prop:"recruitNumber"}},[i("span",[t._v(t._s(t.positionInfoForm.salaryName))])]),t._v(" "),i("el-form-item",{attrs:{label:"工作地点",prop:"address"}},[i("span",[t._v(t._s(t.positionInfoForm.workplaceName))])]),t._v(" "),i("el-form-item",{attrs:{label:"工作职责",prop:"positionRemarks"}},[i("span",[t._v(t._s(t.positionInfoForm.positionRemarks))])]),t._v(" "),i("el-form-item",{attrs:{label:"工作要求",prop:"positionRequire"}},[i("span",[t._v(t._s(t.positionInfoForm.positionRequire))])])],1)],1),t._v(" "),t.showDialog?i("position",{attrs:{showDialog:t.showDialog,disabledEditPosition:!t.editStatus,defaultFormInfo:t.defaultFormInfo},on:{closeDialog:t.closeDialog,positionSubmit:t.positionSubmit}}):t._e(),t._v(" "),i("el-dialog",{attrs:{close:"blacklist-dialog",title:"不通过审核原因",visible:t.inviteRuleForm.dialog},on:{"update:visible":function(e){return t.$set(t.inviteRuleForm,"dialog",e)}}},[i("el-form",{ref:"inviteRuleForm",staticClass:"demo-ruleForm",attrs:{model:t.inviteRuleForm,rules:t.inviteRules}},[i("el-form-item",{attrs:{prop:"audit"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:"5",placeholder:"请填写不通过审核意见，便于单位修改申请信息",resize:"none"},model:{value:t.inviteRuleForm.audit,callback:function(e){t.$set(t.inviteRuleForm,"audit",e)},expression:"inviteRuleForm.audit"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",loading:t.inviteRuleForm.loading},on:{click:function(e){return t.onNoPassInvite("inviteRuleForm")}}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{plain:""},on:{click:function(e){return t.onNoPassInviteCancel("inviteRuleForm")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-title"},[e("i",{staticClass:"must-sign"}),this._v("招聘标题\n      ")])}]};var c=i("VU/8")(r,l,!1,function(t){i("gLNT"),i("gIp7")},"data-v-ab2ad206",null);e.default=c.exports},gIp7:function(t,e){},gLNT:function(t,e){}});