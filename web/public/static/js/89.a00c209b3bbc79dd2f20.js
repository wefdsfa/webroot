webpackJsonp([89],{Yzjt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),o=a.n(i),s=a("7+uW"),l=a("C331"),n=a("/tWO"),r={props:{type:{default:"add"},data:{default:null}},data:function(){return{detectShow:!1,titleJson:{publish:"学生申请岗位限制",setting:"学生申请岗位限制",add:"新增岗位"},typeJson:{publish:"发布",setting:"设置",add:"新增"},layoutData:[{id:"userNo",name:"负责人",type:"detect",required:!0,disabled:!1},{id:"schoolYearId",name:"学年",type:"select",required:!0,disabled:!1,data:{url:"/api/pwps/positions/options/schoolYears",optionsLabel:"name",optionsValue:"id"}},{id:"contact",name:"联系方式",type:"input",required:!0,disabled:!1},{id:"positionType",name:"岗位类型",type:"select",required:!0,disabled:!1,data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}},{id:"unitId",name:"所属单位",type:"select",required:!0,disabled:!1,data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}},{id:"positionName",name:"岗位名称",type:"input",required:!0,disabled:!1},{id:"personCount",name:"岗位人数",type:"number",required:!0,disabled:!1},{id:"address",name:"工作地点",type:"input",required:!0,disabled:!1},{id:"rewardStandard",name:"报酬标准(元/小时)",type:"number",required:!0,disabled:!1},{id:"salaryCapMonth",name:"月工资上限",type:"number",required:!0,disabled:!1},{id:"jobStartTime",name:"工作开始时间",type:"datetime",required:!0,disabled:!1},{id:"jobEndTime",name:"工作结束时间",type:"datetime",required:!0,disabled:!1},{id:"applyStartTime",name:"申请开始时间",type:"datetime",required:!0,disabled:!1},{id:"applyEndTime",name:"申请结束时间",type:"datetime",required:!0,disabled:!1},{id:"workingTime",name:"工作时段",type:"input",required:!1,disabled:!1},{id:"isToDifficultyStudent",name:"只针对困难生",type:"radio",required:!0,disabled:!1,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}},{id:"campus",name:"校区",type:"select",required:!0,disabled:!1,data:{url:"/api/system/dicts?dictType=校区",optionsLabel:"label",optionsValue:"value"}},{id:"canApply",name:"允许学生申请",type:"radio",required:!0,disabled:!1,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}},{id:"description",name:"岗位描述",type:"textarea",required:!0,disabled:!1,data:{maxLength:600,rows:4}},{id:"positionRequire",name:"岗位要求",type:"textarea",required:!1,disabled:!1,data:{maxLength:600,rows:4}},{id:"remark",name:"备注",type:"textarea",required:!1,disabled:!1,data:{maxLength:600,rows:4}}],formData:{unitId:"",managerId:"",userNo:"",userName:"",positionType:"",positionName:"",address:"",rewardStandard:"",jobStartTime:"",jobEndTime:"",applyStartTime:"",applyEndTime:"",schoolYearId:"",contact:"",personCount:"",workingTime:"",salaryCapMonth:"",isToDifficultyStudent:"",canApply:"",description:"",positionRequire:"",remark:"",campus:""}}},methods:{_back:function(){this.$emit("back")},_detect:function(t){this.formData.userNo=t.userNo,this.formData.userName=t.name,this.formData.managerId=t.userId,this.detectShow=!1},_change:function(t,e){var a=this;if("contact"===e.id)/^1[3456789]\d{9}$/.test(this.formData.contact)||(this.$toast("联系方式格式不正确"),this.formData.contact="");else if("jobStartTime"===e.id||"jobEndTime"===e.id){if(this.formData.jobStartTime&&this.formData.jobEndTime)new Date(this.formData.jobStartTime.replace(/-/g,"/")).getTime()-new Date(this.formData.jobEndTime.replace(/-/g,"/")).getTime()>0&&("jobStartTime"===e.id?(this.$toast("工作开始时间不能在工作结束时间之后"),this.$nextTick(function(){a.formData.jobStartTime=""})):(this.$toast("工作结束时间不能在工作开始时间之前"),this.$nextTick(function(){a.formData.jobEndTime=""})))}else if("applyStartTime"===e.id||"applyEndTime"===e.id){if(this.formData.applyStartTime&&this.formData.applyEndTime)new Date(this.formData.applyStartTime.replace(/-/g,"/")).getTime()-new Date(this.formData.applyEndTime.replace(/-/g,"/")).getTime()>0&&("applyStartTime"===e.id?(this.$toast("工作开始时间不能在工作结束时间之后"),this.$nextTick(function(){a.formData.applyStartTime=""})):(this.$toast("工作结束时间不能在工作开始时间之前"),this.$nextTick(function(){a.formData.applyEndTime=""})))}else if("personCount"===e.id){if(["setting","publish"].indexOf(this.type)>=0)parseInt(this.formData.personCount||0)>parseInt(this.formData.initPersonCount||0)||(this.$toast("新值不得小于旧值！"),this.$nextTick(function(){a.formData.personCount=a.formData.initPersonCount}));else parseInt(this.formData.personCount||0)>=0||(this.$toast("不能为负值！"),this.$nextTick(function(){a.formData.personCount=0}))}},_radioClick:function(t,e){t.disabled||(this.formData[t.id]=e[t.data.optionsValue])},_verify:function(){var t=this,e=!0;return this.layoutData.forEach(function(a){a.required&&e&&!t.formData[a.id]&&(t.$toast(a.name+"不能为空"),e=!1)}),e},_save:function(){this._verify()&&this.$emit("submit",this.formData)},_initPageLayout:function(){if("publish"===this.type){if(this.layoutData=[{id:"applyStartTime",name:"申请开始时间",type:"datetime",required:!0,disabled:!1},{id:"applyEndTime",name:"申请结束时间",type:"datetime",required:!0,disabled:!1},{id:"personCount",name:"岗位人数",type:"number",required:!0,disabled:!1},{id:"isToDifficultyStudent",name:"只针对困难生",type:"radio",required:!0,disabled:!1,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}}],this.data)for(var t in this.formData={},this.data)this.$set(this.formData,t,this.data[t])}else if("setting"===this.type&&(this.layoutData=[{id:"applyStartTime",name:"申请开始时间",type:"datetime",required:!0,disabled:!1},{id:"applyEndTime",name:"申请结束时间",type:"datetime",required:!0,disabled:!1},{id:"personCount",name:"岗位人数",type:"number",required:!0,disabled:!1},{id:"isToDifficultyStudent",name:"只针对困难生",type:"radio",required:!0,disabled:!0,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}}],this.data)){for(var t in this.formData={},this.data)this.$set(this.formData,t,this.data[t]);this.formData.initPersonCount=this.formData.personCount||0}}},created:function(){this._initPageLayout()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"job-declare-page"},[a("div",{staticClass:"job-declare-header"},[a("i",{staticClass:"maticon back-icon-btn pull-left",domProps:{innerHTML:t._s(t.icons("navigate_before"))},on:{click:t._back}},[t._v("navigate_before")]),t._v(" "),a("div",{staticClass:"job-declare-title"},[t._v(t._s(t.titleJson[t.type]))])]),t._v(" "),a("div",{staticClass:"job-declare-body"},[a("GeminiScrollbar",{attrs:{scrollX:!1}},[a("div",{staticClass:"body-wrapper container-fluid"},[a("div",{staticClass:"row"},t._l(t.layoutData,function(e,i){return a("div",{key:i,staticClass:"info-item",class:["textarea"===e.type?"col-md-12":"col-md-6"]},[a("div",{staticClass:"input-group info-content",class:{disabled:e.disabled}},[a("span",{staticClass:"input-group-addon",class:{"pull-left":"textarea"===e.type}},[t._v("\n                "+t._s(e.name)+"\n                "),e.required?a("span",{staticClass:"star"},[t._v("*")]):t._e()]),t._v(" "),"input"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"text",disabled:e.disabled},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}}):t._e(),t._v(" "),"number"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"number",disabled:e.disabled},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}}):"select"===e.type?a("v-select",{attrs:{url:e.data&&e.data.url,options:e.data&&e.data.options,optionsLabel:e.data&&e.data.optionsLabel,optionsValue:e.data&&e.data.optionsValue,disabled:e.disabled,"close-on-select":""},on:{change:function(a){return t._change(a,e)}},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"datetime"===e.type?a("v-datepicker",{attrs:{disabled:e.disabled,clearButton:!0,showTime:!1,format:e.data&&e.data.format},on:{change:function(a){return t._change(a,e)}},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"radio"===e.type?a("div",{staticClass:"info-options"},t._l(e.data.options,function(i,o){return a("span",{key:o,on:{click:function(a){return t._radioClick(e,i)}}},[a("i",{staticClass:"maticon ",class:t.formData[e.id]===i[e.data.optionsValue]?"active":"",domProps:{innerHTML:t._s(t.icons(t.formData[e.id]===i[e.data.optionsValue]?"radio_button_checked":"radio_button_unchecked"))}}),t._v("\n                  "+t._s(i[e.data.optionsLabel])+"\n                ")])}),0):"detect"===e.type?a("div",{staticClass:"detect-div"},[t.detectShow?a("detect",{attrs:{url:"/api/users/search",type:"query"},on:{afterSelected:t._detect}}):a("span",{staticClass:"detect-info"},[t._v("\n                  "+t._s(t.formData.userNo?t.formData.userName+"("+t.formData.userNo+")":"无")+"\n                  "),e.disabled?t._e():a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("edit"))},on:{click:function(e){t.detectShow=!0}}})])],1):"textarea"===e.type?a("v-textarea",{attrs:{maxLength:e.data.maxLength,rows:e.data.rows,readonly:e.disabled},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"label"===e.type?a("label",{staticClass:"label-disabled"},[t._v(t._s(t.formData[e.id]||"无"))]):t._e()],1)])}),0)])])],1),t._v(" "),a("div",{staticClass:"job-declare-footer text-center"},[a("a",{staticClass:"btn save",on:{click:t._save}},[t._v(t._s(t.typeJson[t.type]?"确认"+t.typeJson[t.type]:"提    交"))])])])},staticRenderFns:[]};var c=a("VU/8")(r,d,!1,function(t){a("aSey")},null,null).exports;s.a.component("jobApplyForm",n.a),s.a.component("jobDeclare1",c);s.a.component("jobApplyForm",n.a),s.a.component("jobDeclare1",c);var p={created:function(){var t=this,e=localStorage.getItem("lang");Object(l.g)(e)&&(this.lang=e),Object(l.e)({url:"/api/pwps/positions/all/schoolYears",dataType:"json",type:"get",success:function(e){e.state?t.schoolYearData=e.data:t.$toast(e.message)}}),Object(l.e)({url:"/api/system/dicts",dataType:"json",type:"get",data:{dictType:"岗位类型"},success:function(e){e.state?t.positionTypeData=e.data:t.$toast(e.message)}}),this.columns=[{id:"schoolYearId",title:"学年",className:"text-left",hidden:!1,width:100,formatter:function(t){return t.schoolYear&&t.schoolYear.name},search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}}},{id:"unitId",title:"单位名称",className:"text-left",hidden:!1,width:80,formatter:function(t){return t.unit&&t.unit.name},search:{type:"select",data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}}},{id:"positionName",title:"岗位名称",className:"text-left",hidden:!1,width:80,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"positionType",title:"岗位类型",className:"text-left",width:60,hidden:!1,formatter:function(e){var a="";return t.positionTypeData.forEach(function(t,i){t.value===e.positionType&&(a=t.label)}),a},search:{type:"select",data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}}},{id:"personCount",title:"岗位人数",className:"text-right",hidden:!1,width:60},{id:"userIncumbencyCount",title:"在岗人数",className:"text-right",width:60,hidden:!1},{id:"rewardStandard",title:"薪酬标准(元/小时)",className:"text-right",width:110,hidden:!1},{id:"salaryCapMonth",title:"月工资上限",className:"text-right",width:80,hidden:!1},{id:"isToDifficultyStudent",title:"针对困难生",className:"text-center",width:80,hidden:!0,formatter:function(t){return t.isToDifficultyStudent?"是":"否"},search:{type:"select",data:{options:this.isTodifficultStudentData,optionsLabel:"text",optionsValue:"id"}}},{id:"canApply",title:"允许学生申请",className:"text-center",width:100,hidden:!0,formatter:function(t){return t.canApply?"是":"否"},search:{type:"select",data:{options:this.isTodifficultStudentData,optionsLabel:"text",optionsValue:"id"}}},{id:"address",title:"工作地点",className:"text-left",width:80,hidden:!0,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"workingTime",title:"工作时段",className:"text-left",hidden:!0,width:80,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"jobStartTime",title:"工作开始时间",className:"text-left",hidden:!0,width:150,formatter:function(t){return t.jobStartTime?t.jobStartTime.split(" 00:00:00")[0]:""}},{id:"jobEndTime",title:"工作结束时间",className:"text-left",hidden:!0,width:150,formatter:function(t){return t.jobEndTime?t.jobEndTime.split(" 00:00:00")[0]:""}},{id:"applyStartTime",title:"申请开始时间",className:"text-left",hidden:!0,width:150,formatter:function(t){return t.applyStartTime?t.applyStartTime.split(" 00:00:00")[0]:""}},{id:"applyEndTime",title:"申请结束时间",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.applyEndTime?t.applyEndTime.split(" 00:00:00")[0]:""}},{id:"isPublish",title:"发布状态",className:"text-left",width:80,hidden:!1,formatter:function(t){return t.isPublish?"已发布":"未发布"}},{id:"opt",className:"text-left",title:"操作",width:120,hidden:!1,formatter:function(e){var a="发布",i="publish";return e.isPublish&&(a="设置",i="setting"),[{tag:"a",text:a,className:"opt-btn",callback:function(e,a){t.showAddJobModal=!0,t.declareJson={type:i,data:{id:e.id,positionName:e.positionName,isToDifficultyStudent:e.isToDifficultyStudent+"",applyStartTime:e.applyStartTime,applyEndTime:e.applyEndTime,personCount:e.personCount}}}},{tag:"a",text:"删除",className:"opt-btn",callback:function(e,a){window.confirm("删除后数据无法恢复，确定删除吗？")&&Object(l.e)({url:"/api/pwps/positions/"+e.id,type:"DELETE",success:function(e){e.state?(t.url="/table-data/pwps/positions/page/positions?timestamp="+Object(l.a)(),t.$toast("删除成功")):t.$toast(e.message)}})}}]}}],this.jobPeopleColumns=[{id:"schoolYear",title:"学年",className:"text-left",hidden:!1,width:100,search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}}},{id:"userName",title:"姓名",className:"text-left",width:50,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"userNo",title:"学号",className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"idCardNo",title:"身份证",className:"text-left",width:150,hidden:!0,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"collegeCode",title:"学院",className:"text-left",width:100,hidden:!1,search:{type:"select",data:{url:"/api/colleges",optionsLabel:"name",optionsValue:"code"}},formatter:function(t){return t.college}},{id:"unitId",title:"单位名称",className:"text-left",width:80,hidden:!1,search:{type:"select",data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return t.unitName}},{id:"isDifficultyStudent",title:"是否困难生",className:"text-center",width:100,hidden:!0,search:{type:"select",data:{options:[{id:!0,name:"是"},{id:!1,name:"否"}],optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return t.applicationFormVO.isDifficultyStudent?"是":"否"}},{id:"userGrade",title:"年级",className:"text-left",width:40,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"educationLevelName",title:"培养层次",className:"text-left",width:70,hidden:!1,search:{type:"select",data:{url:"/api/system/dicts?dictType=培养层次",optionsLabel:"label",optionsValue:"value"}}},{id:"positionName",title:"岗位名称",className:"text-left",width:100,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"onTheJobStatus",title:"在岗状态",className:"text-left",width:70,hidden:!1,search:{type:"select",data:{options:this.jobStatusData,optionsLabel:"text",optionsValue:"id"}},formatter:function(t){return"ON_JOB"===t.onTheJobStatus?"在岗":"退岗"}},{id:"originPlace",title:"生源地",className:"text-left",width:120,hidden:!0},{id:"opt",className:"text-left",title:"操作",width:120,hidden:!1,formatter:function(){return[{tag:"a",text:"编辑",className:"opt-btn",callback:function(e,a){t.showEditPeopleModal=!0,t.editPeople={id:e.id,jobStartTime:e.jobStartTime,planOnJobEndTime:e.planOnJobEndTime,onTheJobStatus:e.onTheJobStatus,remark:e.remark}}},{tag:"a",text:"查看申请单",className:"opt-btn",callback:function(e,a){t.curRouter="jobApplyForm",t.applicationFormDetail={createTime:e.position&&e.position.createTime,form:e.applicationFormVO,formId:e.id,isShowLog:!1,opts:{canCancel:!1,canResubmit:!1,canRevoke:!1}}}}]}}],this.jobViewColumns=[{id:"schoolYear",title:"学年",className:"text-left",hidden:!1,width:110,search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return t.position&&t.position.schoolYear&&t.position.schoolYear.name}},{id:"month",title:"月份",className:"text-left",width:70,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"unitId",title:"单位名称",className:"text-left",width:130,hidden:!1,formatter:function(t){return t.position&&t.position.unit&&t.position.unit.name},search:{type:"select",data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}}},{id:"positionName",title:"岗位名称",className:"text-left",width:150,hidden:!1,formatter:function(t){return t.position&&t.position.positionName},search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"positionType",title:"岗位类型",className:"text-left",width:100,hidden:!1,formatter:function(e){if(e.position){var a="";return t.positionTypeData.forEach(function(t,i){t.value===e.position.positionType&&(a=t.label)}),a}},search:{type:"select",data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}}},{id:"grantCount",title:"发放人数",className:"text-right",width:80,hidden:!1},{id:"totalPayMount",title:"应发放薪酬",className:"text-left",width:90,hidden:!1},{id:"realPayMount",title:"实际发放薪酬",className:"text-left",width:90,hidden:!1}],this.peopleViewColumns=[{id:"schoolYear",title:"学年",className:"text-left",hidden:!1,width:110,search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return t.position&&t.position.schoolYear&&t.position.schoolYear.name}},{id:"month",title:"月份",className:"text-left",width:80,hidden:!1,search:{type:"input"}},{id:"unitId",title:"单位名称",className:"text-left",width:120,hidden:!1,formatter:function(t){return t.position&&t.position.unit&&t.position.unit.name},search:{type:"select",data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}}},{id:"positionName",title:"岗位名称",className:"text-left",width:120,hidden:!1,formatter:function(t){return t.position&&t.position.positionName},search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"positionType",title:"岗位类型",className:"text-left",width:100,hidden:!0,formatter:function(e){if(e.position){var a="";return t.positionTypeData.forEach(function(t,i){t.value===e.position.positionType&&(a=t.label)}),a}},search:{type:"select",data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}}},{id:"rewardStandard",title:"薪酬标准(元/小时)",className:"text-right",width:120,hidden:!0,formatter:function(t){return t.position&&t.position.rewardStandard}},{id:"salaryCapMonth",title:"薪酬上限",className:"text-right",width:80,hidden:!0,formatter:function(t){return t.position&&t.position.salaryCapMonth}},{id:"name",title:"姓名",className:"text-left",width:100,hidden:!1,formatter:function(t){return t.user&&t.user.name},search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"userNo",title:"学号",className:"text-left",width:130,hidden:!1,formatter:function(t){return t.user&&t.user.userNo},search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"collegeName",title:"学院",className:"text-left",width:80,hidden:!1,formatter:function(t){return t.userDetail.collegeName}},{id:"educationLevel",title:"培养层次",className:"text-left",width:80,hidden:!1,formatter:function(t){return t.userDetail.educationLevelLabel}},{id:"idCardNo",title:"身份证号",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.userDetail.idCardNo}},{id:"contact",title:"联系方式",className:"text-left",width:120,hidden:!0,formatter:function(t){return t.userDetail.contact}},{id:"isDifficultyStudent",title:"是否困难生",className:"text-left",width:100,hidden:!0,formatter:function(t){return t.userDetail.isDifficultyStudent?"是":"否"}},{id:"nation",title:"民族",className:"text-left",width:80,hidden:!0,formatter:function(t){return t.userDetail.nationLabel}},{id:"sex",title:"性别",className:"text-left",width:40,hidden:!0,formatter:function(t){return t.userDetail.sexLabel}},{id:"manHour",title:"工时",className:"text-right",width:60,hidden:!0},{id:"totalPayMount",title:"应发金额",className:"text-right",width:80,hidden:!1},{id:"realPayMount",title:"实发金额",width:80,className:"text-right",hidden:!1},{id:"isGrant",title:"发放状态",className:"text-center",width:100,hidden:!1,search:{type:"select",data:{options:[{value:!0,label:"已发放"},{value:!1,label:"未发放"}],optionsLabel:"label",optionsValue:"value"}},formatter:function(t){return t.isGrant?"已发放":"未发放"}},{id:"remark",title:"备注",width:80,className:"text-left",hidden:!0}],this.salaryGrantManageColumns=this.peopleViewColumns},data:function(){var t=this;return{columns:[],timeStamp:"",url:"/table-data/pwps/positions/page/positions",salaryGrantManageUrl:"/table-data/pwps/salaries/page/byUser",jobViewUrl:"/table-data/pwps/salaries/page/byPosition",peopleViewUrl:"/table-data/pwps/salaries/page/byUser",jobPeoPleUrl:"/table-data/pwps/users/page",salaryGrantManageColumns:[],jobViewColumns:[],peopleViewColumns:[],jobPeopleColumns:[],salaryPeopleExport:{show:!1,fields:[{id:"schoolYear",text:"学年",selected:!0},{id:"month",text:"月份",selected:!0},{id:"unitId",text:"单位名称",selected:!0},{id:"positionName",text:"岗位名称",selected:!0},{id:"positionType",text:"岗位类型",selected:!1},{id:"rewardStandard",text:"薪酬标准(元/小时)",selected:!1},{id:"salaryCapMonth",text:"薪酬上限",selected:!1},{id:"name",text:"姓名",selected:!0},{id:"userNo",text:"学号",selected:!0},{id:"collegeName",text:"学院",selected:!1},{id:"educationLevel",text:"培养层次",selected:!1},{id:"idCardNo",text:"身份证号",selected:!1},{id:"contact",text:"手机",selected:!1},{id:"isDifficultyStudent",text:"是否困难生",selected:!1},{id:"nation",text:"民族",selected:!1},{id:"sex",text:"性别",selected:!1},{id:"manHour",text:"工时",selected:!1},{id:"totalPayMount",text:"应发金额",selected:!0},{id:"realPayMount",text:"实发金额",selected:!0},{id:"isGrant",text:"发放状态",selected:!0},{id:"remark",text:"备注",selected:!0}]},showAddPeopleModal:!1,showAddJobModal:!1,curPage:"schoolJobList",isJobView:!1,viewText:"岗位视图",schoolYearDefault:"",schoolYearData:[],jobDefault:"",jobData:[],people:{userId:"",userNo:"",userName:"",errorMessage:""},job:{},importPage:!1,importParams:{parentPageTitle:"",downloadErrorTemplateUrl:"",templateName:"",importBtnType:null},importJobParams:{parentPageTitle:"全校岗位列表",checkTemplateUrl:"/pwps/positions/import/check",downloadErrorTemplateUrl:"/pwps/positions/import/error",downloadTemplateUrl:"/pwps/positions/import/template",templateName:"岗位列表导入模板",importBtnType:[{url:"/pwps/positions/import",isShowBtn:!0,method:"post",name:"增量导入",success:function(e){e.state&&(t.timeStamp=Object(l.a)())}}]},showEditPeopleModal:!1,jobStatusData:[{id:"ON_JOB",text:"在岗"},{id:"RETREAT_FROM_A_PORT",text:"退岗"}],editPeople:{id:"",jobStartTime:"",planOnJobEndTime:"",onTheJobStatus:"",remark:""},importModalSchoolYearDefault:"",positionTypeData:[],applicationFormDetail:{},curRouter:"schoolJobList",oldRouter:"",isNeedModal:"",declareJson:{type:"",data:null},lang:"zh-cn"}},computed:{translate:function(){return Object(l.g)(this.lang).schoolRoleManage},downloadUrl:function(){return"jobPeopleManage"===this.curPage?"/pwps/users/excels/templates?schoolYear="+this.importModalSchoolYearDefault:"/pwps/users/template/grantResult"},checkTemplateUrl:function(){return"jobPeopleManage"===this.curPage?"/pwps/users/excels/check?schoolYear="+this.importModalSchoolYearDefault:"/pwps/users/salary/grantResults/excel"}},methods:{_back:function(){this.curRouter="schoolJobList"},changeView:function(){this.isJobView=!this.isJobView,this.isJobView?(this.viewText="人员视图",this.salaryGrantManageColumns=this.jobViewColumns,this.salaryGrantManageUrl=this.jobViewUrl):(this.viewText="岗位视图",this.salaryGrantManageColumns=this.peopleViewColumns,this.salaryGrantManageUrl=this.peopleViewUrl)},showSalaryExport:function(){this.salaryPeopleExport.show=!0},_export:function(){var t=this.$refs.gruntTable.tableSearchFields,e="";for(var a in t)t[a]?e+="&"+a+"="+t[a]:e+="&"+a+"=";var i=[],s=!0,l=!1,n=void 0;try{for(var r,d=o()(this.salaryPeopleExport.fields);!(s=(r=d.next()).done);s=!0){var c=r.value;c.selected&&i.push(c.id)}}catch(t){l=!0,n=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw n}}e+="&exportFields="+i.join(","),window.location.href="/downloads/pwps/salaries/excel?detail=true&fileName=全校薪酬发放"+e},importGrantResult:function(){var t=this;this.curRouter="importPage",this.isNeedModal=!1,this.importParams={parentPageTitle:"薪酬发放管理列表",downloadErrorTemplateUrl:"/pwps/users/excel/error/grantResult",templateName:"薪酬发放结果导入"},this.importParams.importBtnType=[{url:"/pwps/users/salary/grantResults",method:"post",isShowBtn:!0,name:"覆盖导入",success:function(e){e.state&&(t.salaryGrantManageUrl="/table-data/pwps/salaries/page/byUser?timestamp="+Object(l.a)())}}]},newAddPeopel:function(){this.showAddPeopleModal=!0,this.schoolYearDefault="",this.jobDefault="",this.people={userId:"",userNo:"",userName:"",errorMessage:""}},batchNewAddPeople:function(){var t=this;this.curRouter="importPage",this.isNeedModal=!0,this.importParams={parentPageTitle:"岗位人员管理列表",downloadErrorTemplateUrl:"",templateName:"岗位人员导入"},this.importParams.importBtnType=[{url:"/pwps/users/batch",method:"post",isShowBtn:!0,name:"增量导入",success:function(e){e.state&&(t.jobPeoPleUrl="/table-data/pwps/users/page?timestamp="+Object(l.a)())}}]},exportJobMembers:function(){var t="",e=this.$refs.jobPeople.tableSearchFields;for(var a in e)t+=a+"="+e[a]+"&";t+="timeStamp="+Object(l.a)(),location.href="/downloads/pwps/users/excel?"+t},newAddJob:function(){this.showAddJobModal=!0,this.declareJson={type:"add",data:null}},batchNewAddJob:function(){this.curRouter="importJobs"},schoolYearSelected:function(t){var e=this;this.schoolYearDefault=t.value,Object(l.e)({url:"/api/pwps/positions/options?schoolYear="+this.schoolYearDefault,type:"GET",success:function(t){t.state?e.jobData=t.data:e.$toast(t.message)}})},checkUser:function(){var t=this;Object(l.e)({url:"/api/users/"+this.people.userNo,type:"GET",success:function(e){e.state?(t.people.userId=e.data.userId,t.people.userName=e.data.name,t.people.errorMessage=""):(t.people.errorMessage="用户不存在",t.people.userId="",t.people.userName="")}})},jobSelected:function(t){this.jobDefault=t.value},sureEditPeople:function(){var t=this;this.editPeople.jobStartTime?this.editPeople.planOnJobEndTime?this.editPeople.onTheJobStatus?Object(l.e)({url:"/api/pwps/users/edit",type:"post",data:this.editPeople,success:function(e){e.state?(t.jobPeoPleUrl="/table-data/pwps/users/page?timestamp="+Object(l.a)(),t.$toast("操作成功"),t.showEditPeopleModal=!1):t.$toast(e.message)}}):this.$toast("在岗状态不能为空"):this.$toast("工作结束时间不能为空"):this.$toast("工作开始时间不能为空")},sureAddPeople:function(){var t=this;this.schoolYearDefault?this.jobDefault?this.people.userId?Object(l.e)({url:"/api/pwps/users",type:"post",data:{userId:this.people.userId,positionId:this.jobDefault},success:function(e){e.state?(t.jobPeoPleUrl="/table-data/pwps/users/page?timestamp="+Object(l.a)(),t.showAddPeopleModal=!1,t.$toast("操作成功")):t.$toast(e.message)}}):this.$toast("请先检测用户"):this.$toast("请先选择岗位"):this.$toast("请先选择学年")},sureAddJob:function(t){var e=this;"publish"===this.declareJson.type?Object(l.e)({url:"/api/pwps/positions/publish/"+t.id,type:"put",data:t,success:function(t){t.state?(e.declareJson={type:"",data:null},e.timeStamp=Object(l.a)(),e.showAddJobModal=!1,e.$toast("岗位发布成功")):"30805"===t.code?e.$toast("该单位已被禁用，无法进行岗位申报"):e.$toast(t.message)}}):"setting"===this.declareJson.type?Object(l.e)({url:"/api/pwps/positions/"+t.id,type:"put",data:t,success:function(t){t.state?(e.declareJson={type:"",data:null},e.timeStamp=Object(l.a)(),e.showAddJobModal=!1,e.$toast("设置保存成功")):e.$toast(t.message)}}):(t.addedByAdmin=!0,Object(l.e)({url:"/api/pwps/positions",type:"post",data:t,success:function(t){t.state?(e.timeStamp=Object(l.a)(),e.showAddJobModal=!1,e.declareJson={type:"",data:null},e.$toast("岗位新增成功")):"30805"===t.code?e.$toast("该单位已被禁用，无法进行岗位新增"):e.$toast(t.message)}}))},_closeDeclare:function(){this.showAddJobModal=!1,this.declareJson={type:"",data:null}},workStartTimeSelected:function(t){var e=this;if(this.editPeople.planOnJobEndTime){if(new Date(t.value).getTime()-new Date(this.editPeople.planOnJobEndTime).getTime()>0)return this.$nextTick(function(){e.$toast("工作开始时间要在工作结束时间之前"),e.editPeople.jobStartTime=""}),!1;this.editPeople.jobStartTime=t.value}else this.editPeople.jobStartTime=t.value},workEndTimeSelected:function(t){var e=this;if(this.editPeople.jobStartTime){if(new Date(t.value).getTime()-new Date(this.editPeople.jobStartTime).getTime()<0)return this.$nextTick(function(){e.$toast("工作结束时间要在工作开始时间之后"),e.editPeople.planOnJobEndTime=""}),!1;this.editPeople.planOnJobEndTime=t.value}else this.editPeople.planOnJobEndTime=t.value},jobStatusSelected:function(t){this.editPeople.onTheJobStatus=t.value},importModalSchoolYearSelected:function(t){this.importModalSchoolYearDefault=t.value}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return"schoolJobList"===t.curRouter?a("div",{staticClass:"container-fluid",attrs:{id:"schoolJobManage"}},["schoolJobList"===t.curPage?a("div",{staticClass:"row text-center"},[a("v-table",{directives:[{name:"show",rawName:"v-show",value:"add"!==t.declareJson.type,expression:"declareJson.type!=='add'"}],key:"schoolJob",attrs:{url:t.url+"?timeStamp="+t.timeStamp,pagesize:"10",idField:"id",order:!0,multiple:!1,search:!1,columnsControl:!0,columns:t.columns}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.newAddJob}},[t._v("新增岗位")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.batchNewAddJob}},[t._v("批量新增岗位")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.curPage="salaryGrantManage"}}},[t._v("切换到薪酬发放管理")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.curPage="jobPeopleManage"}}},[t._v("切换到岗位人员管理")])])])])],1):"jobPeopleManage"===t.curPage?a("div",{staticClass:"row"},[a("v-table",{key:"jobPeople",ref:"jobPeople",attrs:{title:"岗位人员管理",url:t.jobPeoPleUrl,pagesize:"10",idField:"id",order:!0,multiple:!1,search:!1,columnsControl:!0,columns:t.jobPeopleColumns}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.newAddPeopel}},[t._v("新增人员")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.batchNewAddPeople}},[t._v("批量新增人员")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.curPage="schoolJobList"}}},[t._v("切换到全校岗位管理")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.exportJobMembers}},[t._v("导出")])])])])],1):a("div",{staticClass:"row"},[a("v-table",{key:"salary",ref:"gruntTable",attrs:{title:"薪酬发放管理",url:t.salaryGrantManageUrl,pagesize:"10",idField:"id",order:!0,multiple:!1,search:!1,columnsControl:!t.isJobView,columns:t.salaryGrantManageColumns}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-right"},[t.isJobView?t._e():a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.showSalaryExport}},[t._v("导出")]),t._v(" "),t.isJobView?t._e():a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.importGrantResult}},[t._v("发放结果导入")]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.changeView}},[t._v("切换到"+t._s(t.viewText))]),t._v(" "),a("button",{staticClass:"btn table-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.curPage="schoolJobList"}}},[t._v("切换到全校岗位管理")])])])])],1),t._v(" "),a("v-modal",{key:"xxx",attrs:{show:t.salaryPeopleExport.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("导出——字段选择")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("ul",{staticClass:"list-group"},t._l(t.salaryPeopleExport.fields,function(e,i){return a("li",{key:i,staticClass:"list-group-item field-item",class:e.selected?"active":"",on:{click:function(t){e.selected=!e.selected}}},[e.selected?a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]),t._v(" "),a("span",[t._v(t._s(e.text))])])}),0)]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.salaryPeopleExport.show=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._export}},[t._v("导出")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showAddPeopleModal,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("新增人员")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"college-text"},[t._v("学年")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.schoolYearDefault,options:t.schoolYearData,optionsLabel:"name",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.schoolYearSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"college-text"},[t._v("岗位")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.jobDefault,options:t.jobData,optionsLabel:"positionName",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.jobSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("学号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people.userNo,expression:"people.userNo"}],staticClass:"form-control search-input modal-form-style",attrs:{id:"user-no",type:"text"},domProps:{value:t.people.userNo},on:{change:t.checkUser,input:function(e){e.target.composing||t.$set(t.people,"userNo",e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.checkUser}},[t._v("检测")]),t._v(" "),a("p",{staticClass:"error-message"},[t._v(t._s(t.people.errorMessage))])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people.userName,expression:"people.userName"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.people.userName},on:{input:function(e){e.target.composing||t.$set(t.people,"userName",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddPeopleModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.sureAddPeople}},[t._v("确定")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showEditPeopleModal,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("编辑人员")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group info-group"},[a("label",{staticClass:"input-label text-right pull-left"},[t._v("工作开始时间")]),t._v(" "),a("v-datepicker",{staticClass:"time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.workStartTimeSelected},model:{value:t.editPeople.jobStartTime,callback:function(e){t.$set(t.editPeople,"jobStartTime",e)},expression:"editPeople.jobStartTime"}})],1),t._v(" "),a("div",{staticClass:"form-group info-group"},[a("label",{staticClass:"input-label text-right pull-left"},[t._v("开始结束时间")]),t._v(" "),a("v-datepicker",{staticClass:"time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.workEndTimeSelected},model:{value:t.editPeople.planOnJobEndTime,callback:function(e){t.$set(t.editPeople,"planOnJobEndTime",e)},expression:"editPeople.planOnJobEndTime"}})],1),t._v(" "),a("div",{staticClass:"form-group info-group"},[a("label",{staticClass:"input-label text-right pull-left"},[t._v("在岗状态")]),t._v(" "),a("v-select",{staticClass:"search-select",attrs:{value:t.editPeople.onTheJobStatus,options:t.jobStatusData,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.jobStatusSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label textarea-label four-words-difference-margin"},[t._v("备注")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editPeople.remark,expression:"editPeople.remark"}],staticClass:"modal-textarea",attrs:{cols:"24",rows:"5",maxlength:"600"},domProps:{value:t.editPeople.remark},on:{input:function(e){e.target.composing||t.$set(t.editPeople,"remark",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showEditPeopleModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.sureEditPeople}},[t._v("确定")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showAddJobModal&&["setting","publish"].indexOf(t.declareJson.type)>=0,width:"900"}},[a("div",{staticClass:"modal-body",staticStyle:{height:"400px",padding:"0"},attrs:{slot:"modal-body"},slot:"modal-body"},[t.showAddJobModal?a("jobDeclare1",{attrs:{type:t.declareJson.type,data:t.declareJson.data},on:{back:t._closeDeclare,submit:t.sureAddJob}}):t._e()],1)]),t._v(" "),t.showAddJobModal&&["setting","publish"].indexOf(t.declareJson.type)<0?a("jobDeclare1",{attrs:{type:t.declareJson.type,data:t.declareJson.data},on:{back:t._closeDeclare,submit:t.sureAddJob}}):t._e()],1):"importPage"===t.curRouter?a("v-import",t._b({attrs:{downloadTemplateUrl:t.downloadUrl,checkTemplateUrl:t.checkTemplateUrl,isNeedModal:t.isNeedModal,modalname:"选择学年"},on:{backParentPage:function(e){t.curRouter="schoolJobList"}}},"v-import",t.importParams,!1),[a("div",{attrs:{slot:"modal"},slot:"modal"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"college-text"},[t._v("学年")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.importModalSchoolYearDefault,options:t.schoolYearData,optionsLabel:"name",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.importModalSchoolYearSelected}})],1)])]):"importJobs"===t.curRouter?a("v-import",t._b({staticClass:"jobs-batch-import",on:{backParentPage:function(e){t.curRouter="schoolJobList"}}},"v-import",t.importJobParams,!1)):a("jobApplyForm",{attrs:{formType:"schoolJobView",isApply:!1,formDetail:t.applicationFormDetail},on:{back:t._back}})},staticRenderFns:[]};var m=a("VU/8")(p,u,!1,function(t){a("lpJI")},null,null);e.default=m.exports},aSey:function(t,e){},lpJI:function(t,e){}});