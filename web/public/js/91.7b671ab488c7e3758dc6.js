webpackJsonp([91],{EzB9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("wHeh");var s=a("C331"),l={created:function(){var e=localStorage.getItem("lang"),t=this;Object(s.f)(e)&&(this.lang=e),this.columns=[{id:"name",title:this.translate.college,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:this.translate.collegeNamePlaceholder}}},{id:"principal",title:this.translate.principal,className:"text-left",hidden:!1,formatter:function(e,t){return e.personInCharge?e.personInCharge.name:""}},{id:"userNo",title:this.translate.userId,className:"text-left",hidden:!1,formatter:function(e,t){return e.personInCharge?e.personInCharge.userNo:""}},{id:"updateTime",title:this.translate.updatedTime,className:"text-left",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-center",width:"220px",hidden:!1,formatter:function(){return[{tag:"a",text:t.translate.set+t.translate.principal,className:"opt-btn",callback:function(e,a){t.college=e,t.newCollege={userIdErrorMsg:"",userName:"",nameErrorMsg:""},t.newCollege.collegeId=e.id,t.showAddModal=!0,t.isDisabled.add=!0}}]}}],this.importBtnType=[{name:this.translate.overriteImport,url:"/colleges/excel",isShowBtn:!0},{name:this.translate.incrementImport,url:"",isShowBtn:!1}]},data:function(){return{columns:[],url:"/table-data/colleges/pages",downloadUrl:"/colleges/excelTemplates",errorMessageUrl:"/colleges/errExcel",checkTemplateUrl:"/colleges/excel",templateName:"学院导入模板.xlsx",method:"put",showAddModal:!1,showEditModal:!1,showBatchSetModal:!1,options:[],college:{},newCollege:{userIdErrorMsg:"",userName:"",nameErrorMsg:""},isDisabled:{add:!0,batchSet:!0},showErrorMsg:!1,checkResult:"",isParentPage:!0,lang:"zh-cn"}},computed:{translate:function(){return Object(s.f)(this.lang).collegeManage}},methods:{importCollege:function(){this.isParentPage=!1},backParentPage:function(){this.isParentPage=!0},addPrincipal:function(e){if(e)return!1;var t=this;Object(s.d)({url:"/api/colleges/"+this.newCollege.collegeId+"/managers",dataType:"json",data:{userId:this.newCollege.userId},type:"put",success:function(e){e.state?(t.url="/table-data/colleges/pages?timestamp="+(new Date).getTime(),t.showAddModal=!1,t.$toast(t.translate.setSuccessTip)):t.$toast(t.translate.setFailedTip+":"+e.message)}})},checkUserId:function(){if(!this.newCollege.userNo)return this.newCollege.userIdErrorMsg=this.translate.placeholder,this.isDisabled.add=!0,!1;var e=this;Object(s.d)({url:"/api/users/"+this.newCollege.userNo,dataType:"json",type:"get",success:function(t){t.state?(e.newCollege.userName=t.data.name,e.newCollege.userId=t.data.userId,e.newCollege.userIdErrorMsg="",e.isDisabled.add=!1):(e.newCollege.userIdErrorMsg=t.message,e.newCollege.userName="",e.isDisabled.add=!0)}})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isParentPage?a("div",{staticClass:"container-fluid",attrs:{id:"collegeManage-page"}},[a("div",{staticClass:"row text-center"},[a("v-table",{attrs:{title:e.translate.tableName,url:e.url,pagesize:"10",idField:"id",columns:e.columns,multiple:!1,order:!0,search:!0}})],1),e._v(" "),a("v-modal",{attrs:{show:e.showAddModal,effect:"fade",width:"450"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v("\n          "+e._s(e.translate.set)+e._s(e.translate.principal)+"\n      ")])]),e._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group add-principal-group"},[a("label",{staticClass:"name-text"},[e._v(e._s(e.translate.userId)+":")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newCollege.userNo,expression:"newCollege.userNo"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text",placeholder:e.translate.placeholder},domProps:{value:e.newCollege.userNo},on:{input:function(t){t.target.composing||e.$set(e.newCollege,"userNo",t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:e.checkUserId}},[e._v(e._s(e.translate.check))]),e._v(" "),a("div",{staticClass:"errorMsg"},[e._v(e._s(e.newCollege.userIdErrorMsg))])]),e._v(" "),a("div",{staticClass:"form-group add-principal-group"},[a("label",{staticClass:"name-text"},[e._v(e._s(e.translate.name)+":")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newCollege.userName,expression:"newCollege.userName"}],staticClass:"form-control name-input modal-form-style",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.newCollege.userName},on:{input:function(t){t.target.composing||e.$set(e.newCollege,"userName",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){e.showAddModal=!1}}},[e._v(e._s(e.translate.cancel))]),e._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",class:{disabled:e.isDisabled.add},attrs:{type:"button"},on:{click:function(t){return e.addPrincipal(e.isDisabled.add)}}},[e._v(e._s(e.translate.confirm))])])])],1):e._e()},staticRenderFns:[]};var o=a("Mz/3")(l,r,!1,function(e){a("khIj")},null,null);t.default=o.exports},khIj:function(e,t){}});